/**
 * Copyright 2015 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

!function(e,define){define(["./kendo.data.min"],e)}(function(){return function(e,t){function n(e,t,n,i,a){return e({idx:t,text:n,ns:u.ns,numeric:i,title:a||""})}function i(e,t,n){return k({className:e.substring(1),text:t,wrapClassName:n||""})}function a(e,t,n,i){e.find(t).parent().attr(u.attr("page"),n).attr("tabindex",-1).toggleClass("k-state-disabled",i)}function r(e,t){a(e,p,1,1>=t)}function o(e,t){a(e,m,Math.max(1,t-1),1>=t)}function s(e,t,n){a(e,g,Math.min(n,t+1),t>=n)}function l(e,t,n){a(e,f,n,t>=n)}var u=window.kendo,c=u.ui,d=c.Widget,h=e.proxy,p=".k-i-seek-w",f=".k-i-seek-e",m=".k-i-arrow-w",g=".k-i-arrow-e",v="change",_=".kendoPager",w="click",b="keydown",y="disabled",k=u.template('<a href="\\#" title="#=text#" class="k-link k-pager-nav #= wrapClassName #"><span class="k-icon #= className #">#=text#</span></a>'),x=d.extend({init:function(t,n){var a,c,y,k,x=this;d.fn.init.call(x,t,n),n=x.options,x.dataSource=u.data.DataSource.create(n.dataSource),x.linkTemplate=u.template(x.options.linkTemplate),x.selectTemplate=u.template(x.options.selectTemplate),x.currentPageTemplate=u.template(x.options.currentPageTemplate),a=x.page(),c=x.totalPages(),x._refreshHandler=h(x.refresh,x),x.dataSource.bind(v,x._refreshHandler),n.previousNext&&(x.element.find(p).length||(x.element.append(i(p,n.messages.first,"k-pager-first")),r(x.element,a,c)),x.element.find(m).length||(x.element.append(i(m,n.messages.previous)),o(x.element,a,c))),n.numeric&&(x.list=x.element.find(".k-pager-numbers"),x.list.length||(x.list=e('<ul class="k-pager-numbers k-reset" />').appendTo(x.element))),n.input&&(x.element.find(".k-pager-input").length||x.element.append('<span class="k-pager-input k-label">'+n.messages.page+'<input class="k-textbox">'+u.format(n.messages.of,c)+"</span>"),x.element.on(b+_,".k-pager-input input",h(x._keydown,x))),n.previousNext&&(x.element.find(g).length||(x.element.append(i(g,n.messages.next)),s(x.element,a,c)),x.element.find(f).length||(x.element.append(i(f,n.messages.last,"k-pager-last")),l(x.element,a,c))),n.pageSizes&&(x.element.find(".k-pager-sizes").length||(y=n.pageSizes.length?n.pageSizes:["all",5,10,20],k=e.map(y,function(e){return e.toLowerCase&&"all"===e.toLowerCase()?"<option value='all'>"+n.messages.allPages+"</option>":"<option>"+e+"</option>"}),e('<span class="k-pager-sizes k-label"><select/>'+n.messages.itemsPerPage+"</span>").appendTo(x.element).find("select").html(k.join("")).end().appendTo(x.element)),x.element.find(".k-pager-sizes select").val(x.pageSize()),u.ui.DropDownList&&x.element.find(".k-pager-sizes select").show().kendoDropDownList(),x.element.on(v+_,".k-pager-sizes select",h(x._change,x))),n.refresh&&(x.element.find(".k-pager-refresh").length||x.element.append('<a href="#" class="k-pager-refresh k-link" title="'+n.messages.refresh+'"><span class="k-icon k-i-refresh">'+n.messages.refresh+"</span></a>"),x.element.on(w+_,".k-pager-refresh",h(x._refreshClick,x))),n.info&&(x.element.find(".k-pager-info").length||x.element.append('<span class="k-pager-info k-label" />')),x.element.on(w+_,"a",h(x._click,x)).addClass("k-pager-wrap k-widget k-floatwrap"),x.element.on(w+_,".k-current-page",h(x._toggleActive,x)),n.autoBind&&x.refresh(),u.notify(x)},destroy:function(){var e=this;d.fn.destroy.call(e),e.element.off(_),e.dataSource.unbind(v,e._refreshHandler),e._refreshHandler=null,u.destroy(e.element),e.element=e.list=null},events:[v],options:{name:"Pager",selectTemplate:'<li><span class="k-state-selected">#=text#</span></li>',currentPageTemplate:'<li class="k-current-page"><span class="k-link k-pager-nav">#=text#</span></li>',linkTemplate:'<li><a tabindex="-1" href="\\#" class="k-link" data-#=ns#page="#=idx#" #if (title !== "") {# title="#=title#" #}#>#=text#</a></li>',buttonCount:10,autoBind:!0,numeric:!0,info:!0,input:!1,previousNext:!0,pageSizes:!1,refresh:!1,messages:{allPages:"All",display:"{0} - {1} of {2} items",empty:"No items to display",page:"Page",of:"of {0}",itemsPerPage:"items per page",first:"Go to the first page",previous:"Go to the previous page",next:"Go to the next page",last:"Go to the last page",refresh:"Refresh",morePages:"More pages"}},setDataSource:function(e){var t=this;t.dataSource.unbind(v,t._refreshHandler),t.dataSource=t.options.dataSource=e,e.bind(v,t._refreshHandler),t.options.autoBind&&e.fetch()},refresh:function(e){var t,i,a,c,d,h,p=this,f=1,m=p.page(),g="",v=p.options,_=p.pageSize(),w=p.dataSource.total(),b=p.totalPages(),k=p.linkTemplate,x=v.buttonCount;if(!e||"itemchange"!=e.action){if(v.numeric){for(m>x&&(a=m%x,f=0===a?m-x+1:m-a+1),i=Math.min(f+x-1,b),f>1&&(g+=n(k,f-1,"...",!1,v.messages.morePages)),t=f;i>=t;t++)g+=n(t==m?p.selectTemplate:k,t,t,!0);b>i&&(g+=n(k,t,"...",!1,v.messages.morePages)),""===g&&(g=p.selectTemplate({text:0})),g=this.currentPageTemplate({text:m})+g,p.list.removeClass("k-state-expanded").html(g)}v.info&&(g=w>0?u.format(v.messages.display,(m-1)*_+1,Math.min(m*_,w),w):v.messages.empty,p.element.find(".k-pager-info").html(g)),v.input&&p.element.find(".k-pager-input").html(p.options.messages.page+'<input class="k-textbox">'+u.format(v.messages.of,b)).find("input").val(m).attr(y,1>w).toggleClass("k-state-disabled",1>w),v.previousNext&&(r(p.element,m,b),o(p.element,m,b),s(p.element,m,b),l(p.element,m,b)),v.pageSizes&&(c=p.element.find(".k-pager-sizes option[value='all']").length>0,d=c&&_===this.dataSource.total(),h=_,d&&(_="all",h=v.messages.allPages),p.element.find(".k-pager-sizes select").val(_).filter("["+u.attr("role")+"=dropdownlist]").kendoDropDownList("value",_).kendoDropDownList("text",h))}},_keydown:function(e){if(e.keyCode===u.keys.ENTER){var t=this.element.find(".k-pager-input").find("input"),n=parseInt(t.val(),10);(isNaN(n)||1>n||n>this.totalPages())&&(n=this.page()),t.val(n),this.page(n)}},_refreshClick:function(e){e.preventDefault(),this.dataSource.read()},_change:function(e){var t=e.currentTarget.value,n=parseInt(t,10),i=this.dataSource;isNaN(n)?"all"==(t+"").toLowerCase()&&i.pageSize(i.total()):i.pageSize(n)},_toggleActive:function(){this.list.toggleClass("k-state-expanded")},_click:function(t){var n=e(t.currentTarget);t.preventDefault(),n.is(".k-state-disabled")||this.page(n.attr(u.attr("page")))},totalPages:function(){return Math.ceil((this.dataSource.total()||0)/(this.pageSize()||1))},pageSize:function(){return this.dataSource.pageSize()||this.dataSource.total()},page:function(e){return e===t?this.dataSource.total()>0?this.dataSource.page():0:(this.dataSource.page(e),this.trigger(v,{index:e}),t)}});c.plugin(x)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});