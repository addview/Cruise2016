/**
 * Copyright 2015 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

!function(e,define){define(["./kendo.resizable.min"],e)}(function(){return function(e,t){function n(e){return v.test(e)}function i(e){return g.test(e)||/^\d+$/.test(e)}function a(e){return!n(e)&&!i(e)}function r(e,t){var i=parseInt(e,10);return n(e)&&(i=Math.floor(i*t/100)),i}function o(e,n){return function(i,a){var r,o=this.element.find(i).data(I);return 1==arguments.length?o[e]:(o[e]=a,n&&(r=this.element.data("kendo"+this.options.name),r.resize(!0)),t)}}function s(e){var t=this,n=e.orientation;t.owner=e,t._element=e.element,t.orientation=n,h(t,n===S?u:l),t._resizable=new c.ui.Resizable(e.element,{orientation:n,handle:".k-splitbar-draggable-"+n+"[data-marker="+e._marker+"]",hint:f(t._createHint,t),start:f(t._start,t),max:f(t._max,t),min:f(t._min,t),invalidClass:"k-restricted-size-"+n,resizeend:f(t._stop,t)})}var l,u,c=window.kendo,d=c.ui,p=c.keys,h=e.extend,f=e.proxy,m=d.Widget,g=/^\d+(\.\d+)?px$/i,v=/^\d+(\.\d+)?%$/i,_=".kendoSplitter",w="expand",b="collapse",y="contentLoad",k="error",x="resize",C="layoutChange",S="horizontal",T="vertical",D="mouseenter",E="click",I="pane",P="mouseleave",F="k-state-focused",M="k-"+I,A="."+M,O=m.extend({init:function(e,t){var n,i=this;m.fn.init.call(i,e,t),i.wrapper=i.element,n=i.options.orientation.toLowerCase()!=T,i.orientation=n?S:T,i._dimension=n?"width":"height",i._keys={decrease:n?p.LEFT:p.UP,increase:n?p.RIGHT:p.DOWN},i._resizeStep=10,i._marker=c.guid().substring(0,8),i._initPanes(),i.resizing=new s(i),i.element.triggerHandler("init"+_)},events:[w,b,y,k,x,C],_addOverlays:function(){this._panes().append("<div class='k-splitter-overlay k-overlay' />")},_removeOverlays:function(){this._panes().children(".k-splitter-overlay").remove()},_attachEvents:function(){var t=this,n=t.options.orientation;t.element.children(".k-splitbar-draggable-"+n).on("keydown"+_,f(t._keydown,t)).on("mousedown"+_,function(e){e.currentTarget.focus()}).on("focus"+_,function(t){e(t.currentTarget).addClass(F)}).on("blur"+_,function(n){e(n.currentTarget).removeClass(F),t.resizing&&t.resizing.end()}).on(D+_,function(){e(this).addClass("k-splitbar-"+t.orientation+"-hover")}).on(P+_,function(){e(this).removeClass("k-splitbar-"+t.orientation+"-hover")}).on("mousedown"+_,f(t._addOverlays,t)).end().children(".k-splitbar").on("dblclick"+_,f(t._togglePane,t)).children(".k-collapse-next, .k-collapse-prev").on(E+_,t._arrowClick(b)).end().children(".k-expand-next, .k-expand-prev").on(E+_,t._arrowClick(w)).end().end(),e(window).on("resize"+_+t._marker,f(t.resize,t,!1)),e(document).on("mouseup"+_+t._marker,f(t._removeOverlays,t))},_detachEvents:function(){var t=this;t.element.children(".k-splitbar-draggable-"+t.orientation).off(_).end().children(".k-splitbar").off("dblclick"+_).children(".k-collapse-next, .k-collapse-prev, .k-expand-next, .k-expand-prev").off(_),e(window).off(_+t._marker),e(document).off(_+t._marker)},options:{name:"Splitter",orientation:S,panes:[]},destroy:function(){m.fn.destroy.call(this),this._detachEvents(),this.resizing&&this.resizing.destroy(),c.destroy(this.element),this.wrapper=this.element=null},_keydown:function(t){var n,i=this,a=t.keyCode,r=i.resizing,o=e(t.currentTarget),s=i._keys,l=a===s.increase,u=a===s.decrease;l||u?(t.ctrlKey?(n=o[u?"next":"prev"](),r&&r.isResizing()&&r.end(),n[i._dimension]()?i._triggerAction(b,o[u?"prev":"next"]()):i._triggerAction(w,n)):r&&r.move((u?-1:1)*i._resizeStep,o),t.preventDefault()):a===p.ENTER&&r&&(r.end(),t.preventDefault())},_initPanes:function(){var e=this.options.panes||[],t=this;this.element.addClass("k-widget").addClass("k-splitter").children().each(function(n,i){"script"!=i.nodeName.toLowerCase()&&t._initPane(i,e[n])}),this.resize()},_initPane:function(t,n){t=e(t).attr("role","group").addClass(M),t.data(I,n?n:{}).toggleClass("k-scrollable",n?n.scrollable!==!1:!0),this.ajaxRequest(t)},ajaxRequest:function(e,t,n){var i,a=this;e=a.element.find(e),i=e.data(I),t=t||i.contentUrl,t&&(e.append("<span class='k-icon k-loading k-pane-loading' />"),c.isLocalUrl(t)?jQuery.ajax({url:t,data:n||{},type:"GET",dataType:"html",success:function(t){a.angular("cleanup",function(){return{elements:e.get()}}),e.html(t),a.angular("compile",function(){return{elements:e.get()}}),a.trigger(y,{pane:e[0]})},error:function(t,n){a.trigger(k,{pane:e[0],status:n,xhr:t})}}):e.removeClass("k-scrollable").html("<iframe src='"+t+"' frameborder='0' class='k-content-frame'>This page requires frames in order to show content</iframe>"))},_triggerAction:function(e,t){this.trigger(e,{pane:t[0]})||this[e](t[0])},_togglePane:function(t){var n,i=this,a=e(t.target);a.closest(".k-splitter")[0]==i.element[0]&&(n=a.children(".k-icon:not(.k-resize-handle)"),1===n.length&&(n.is(".k-collapse-prev")?i._triggerAction(b,a.prev()):n.is(".k-collapse-next")?i._triggerAction(b,a.next()):n.is(".k-expand-prev")?i._triggerAction(w,a.prev()):n.is(".k-expand-next")&&i._triggerAction(w,a.next())))},_arrowClick:function(t){var n=this;return function(i){var a,r=e(i.target);r.closest(".k-splitter")[0]==n.element[0]&&(a=r.is(".k-"+t+"-prev")?r.parent().prev():r.parent().next(),n._triggerAction(t,a))}},_updateSplitBar:function(e,t,n){var i=function(e,t){return t?"<div class='k-icon "+e+"' />":""},a=this.orientation,r=t.resizable!==!1&&n.resizable!==!1,o=t.collapsible,s=t.collapsed,l=n.collapsible,u=n.collapsed;e.addClass("k-splitbar k-state-default k-splitbar-"+a).attr("role","separator").attr("aria-expanded",!(s||u)).removeClass("k-splitbar-"+a+"-hover").toggleClass("k-splitbar-draggable-"+a,r&&!s&&!u).toggleClass("k-splitbar-static-"+a,!r&&!o&&!l).html(i("k-collapse-prev",o&&!s&&!u)+i("k-expand-prev",o&&s&&!u)+i("k-resize-handle",r)+i("k-collapse-next",l&&!u&&!s)+i("k-expand-next",l&&u&&!s)),r||o||l||e.removeAttr("tabindex")},_updateSplitBars:function(){var t=this;this.element.children(".k-splitbar").each(function(){var n=e(this),i=n.prevAll(A).first().data(I),a=n.nextAll(A).first().data(I);a&&t._updateSplitBar(n,i,a)})},_removeSplitBars:function(){this.element.children(".k-splitbar").remove()},_panes:function(){return this.element?this.element.children(A):e()},_resize:function(){var n,i,o,s,l,u,d,p,h,f,m=this,g=m.element,v=g.children(A),_=m.orientation==S,w=g.children(".k-splitbar"),b=w.length,y=_?"width":"height",k=g[y]();m.wrapper.addClass("k-splitter-resizing"),0===b?(b=v.length-1,v.slice(0,b).after("<div tabindex='0' class='k-splitbar' data-marker='"+m._marker+"' />"),m._updateSplitBars(),w=g.children(".k-splitbar")):m._updateSplitBars(),w.each(function(){k-=this[_?"offsetWidth":"offsetHeight"]}),n=0,i=0,o=e(),v.css({position:"absolute",top:0})[y](function(){var s,l=e(this),u=l.data(I)||{};if(l.removeClass("k-state-collapsed"),u.collapsed)s=u.collapsedSize?r(u.collapsedSize,k):0,l.css("overflow","hidden").addClass("k-state-collapsed");else{if(a(u.size))return o=o.add(this),t;s=r(u.size,k)}return i++,n+=s,s}),k-=n,s=o.length,l=Math.floor(k/s),o.slice(0,s-1).css(y,l).end().eq(s-1).css(y,k-(s-1)*l),u=0,d=_?"height":"width",p=_?"left":"top",h=_?"offsetWidth":"offsetHeight",0===s&&(f=v.filter(function(){return!(e(this).data(I)||{}).collapsed}).last(),f[y](k+f[0][h])),g.children().css(d,g[d]()).each(function(e,t){"script"!=t.tagName.toLowerCase()&&(t.style[p]=Math.floor(u)+"px",u+=t[h])}),m._detachEvents(),m._attachEvents(),m.wrapper.removeClass("k-splitter-resizing"),c.resize(v),m.trigger(C)},toggle:function(e,n){var i,a=this;e=a.element.find(e),i=e.data(I),(n||i.collapsible)&&(1==arguments.length&&(n=i.collapsed===t?!1:i.collapsed),i.collapsed=!n,i.collapsed?e.css("overflow","hidden"):e.css("overflow",""),a.resize(!0))},collapse:function(e){this.toggle(e,!1)},expand:function(e){this.toggle(e,!0)},_addPane:function(e,t,n){var i=this;return n.length&&(i.options.panes.splice(t,0,e),i._initPane(n,e),i._removeSplitBars(),i.resize(!0)),n},append:function(t){t=t||{};var n=this,i=e("<div />").appendTo(n.element);return n._addPane(t,n.options.panes.length,i)},insertBefore:function(t,n){n=e(n),t=t||{};var i=this,a=i.wrapper.children(".k-pane").index(n),r=e("<div />").insertBefore(e(n));return i._addPane(t,a,r)},insertAfter:function(t,n){n=e(n),t=t||{};var i=this,a=i.wrapper.children(".k-pane").index(n),r=e("<div />").insertAfter(e(n));return i._addPane(t,a+1,r)},remove:function(t){t=e(t);var n=this;return t.length&&(c.destroy(t),t.each(function(t,i){n.options.panes.splice(n.wrapper.children(".k-pane").index(i),1),e(i).remove()}),n._removeSplitBars(),n.options.panes.length&&n.resize(!0)),n},size:o("size",!0),min:o("min"),max:o("max")});d.plugin(O),l={sizingProperty:"height",sizingDomProperty:"offsetHeight",alternateSizingProperty:"width",positioningProperty:"top",mousePositioningProperty:"pageY"},u={sizingProperty:"width",sizingDomProperty:"offsetWidth",alternateSizingProperty:"height",positioningProperty:"left",mousePositioningProperty:"pageX"},s.prototype={press:function(e){this._resizable.press(e)},move:function(e,t){this.pressed||(this.press(t),this.pressed=!0),this._resizable.target||this._resizable.press(t),this._resizable.move(e)},end:function(){this._resizable.end(),this.pressed=!1},destroy:function(){this._resizable.destroy(),this._resizable=this._element=this.owner=null},isResizing:function(){return this._resizable.resizing},_createHint:function(t){var n=this;return e("<div class='k-ghost-splitbar k-ghost-splitbar-"+n.orientation+" k-state-default' />").css(n.alternateSizingProperty,t[n.alternateSizingProperty]())},_start:function(t){var n=this,a=e(t.currentTarget),r=a.prev(),o=a.next(),s=r.data(I),l=o.data(I),u=parseInt(r[0].style[n.positioningProperty],10),c=parseInt(o[0].style[n.positioningProperty],10)+o[0][n.sizingDomProperty]-a[0][n.sizingDomProperty],d=parseInt(n._element.css(n.sizingProperty),10),p=function(e){var t=parseInt(e,10);return(i(e)?t:d*t/100)||0},h=p(s.min),f=p(s.max)||c-u,m=p(l.min),g=p(l.max)||c-u;n.previousPane=r,n.nextPane=o,n._maxPosition=Math.min(c-m,u+f),n._minPosition=Math.max(u+h,c-g)},_max:function(){return this._maxPosition},_min:function(){return this._minPosition},_stop:function(t){var n,i,r,o,s,l,u,d,p=this,h=e(t.currentTarget),f=p.owner;return f._panes().children(".k-splitter-overlay").remove(),t.keyCode!==c.keys.ESC&&(n=t.position,i=h.prev(),r=h.next(),o=i.data(I),s=r.data(I),l=n-parseInt(i[0].style[p.positioningProperty],10),u=parseInt(r[0].style[p.positioningProperty],10)+r[0][p.sizingDomProperty]-n-h[0][p.sizingDomProperty],d=p._element.children(A).filter(function(){return a(e(this).data(I).size)}).length,(!a(o.size)||d>1)&&(a(o.size)&&d--,o.size=l+"px"),(!a(s.size)||d>1)&&(s.size=u+"px"),f.resize(!0)),!1}}}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});