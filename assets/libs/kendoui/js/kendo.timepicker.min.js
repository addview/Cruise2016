/**
 * Copyright 2015 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

!function(e,define){define(["./kendo.popup.min"],e)}(function(){return function(e,t){function n(e,t,n){var i,a=e.getTimezoneOffset();e.setTime(e.getTime()+t),n||(i=e.getTimezoneOffset()-a,e.setTime(e.getTime()+i*A))}function i(){var e=new G,t=new G(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),n=new G(e.getFullYear(),e.getMonth(),e.getDate(),12,0,0);return-1*(t.getTimezoneOffset()-n.getTimezoneOffset())}function a(e){return 60*e.getHours()*A+e.getMinutes()*A+1e3*e.getSeconds()+e.getMilliseconds()}function r(e,t,n){var i,r=a(t),o=a(n);return e&&r!=o?(i=a(e),r>i&&(i+=H),r>o&&(o+=H),i>=r&&o>=i):!0}function o(e){var t=e.parseFormats;e.format=h(e.format||c.getCulture(e.culture).calendars.standard.patterns.t),t=U(t)?t:[t],t.splice(0,0,e.format),e.parseFormats=t}function s(e){e.preventDefault()}var l,u,c=window.kendo,d=c.keys,p=c.parseDate,f=c._activeElement,h=c._extractFormat,m=c.support,g=m.browser,v=c.ui,_=v.Widget,w="open",b="close",k="change",y=".kendoTimePicker",x="click"+y,C="k-state-default",S="disabled",T="readonly",D="li",E="<span/>",I="k-state-focused",P="k-state-hover",F="mouseenter"+y+" mouseleave"+y,M="mousedown"+y,A=6e4,H=864e5,O="k-state-selected",z="k-state-disabled",V="aria-selected",B="aria-expanded",L="aria-hidden",R="aria-disabled",N="aria-readonly",W="aria-activedescendant",$="id",U=e.isArray,q=e.extend,j=e.proxy,G=Date,Y=new G;Y=new G(Y.getFullYear(),Y.getMonth(),Y.getDate(),0,0,0),l=function(t){var n=this,i=t.id;n.options=t,n.ul=e('<ul tabindex="-1" role="listbox" aria-hidden="true" unselectable="on" class="k-list k-reset"/>').css({overflow:m.kineticScrollNeeded?"":"auto"}).on(x,D,j(n._click,n)).on("mouseenter"+y,D,function(){e(this).addClass(P)}).on("mouseleave"+y,D,function(){e(this).removeClass(P)}),n.list=e("<div class='k-list-container'/>").append(n.ul).on(M,s),i&&(n._timeViewID=i+"_timeview",n._optionID=i+"_option_selected",n.ul.attr($,n._timeViewID)),n._popup(),n._heightHandler=j(n._height,n),n.template=c.template('<li tabindex="-1" role="option" class="k-item" unselectable="on">#=data#</li>',{useWithBlock:!1})},l.prototype={current:function(n){var i=this,a=i.options.active;return n===t?i._current:(i._current&&i._current.removeClass(O).removeAttr(V).removeAttr($),n&&(n=e(n).addClass(O).attr($,i._optionID).attr(V,!0),i.scroll(n[0])),i._current=n,a&&a(n),t)},close:function(){this.popup.close()},destroy:function(){var e=this;e.ul.off(y),e.list.off(y),e._touchScroller&&e._touchScroller.destroy(),e.popup.destroy()},open:function(){var e=this;e.ul[0].firstChild||e.bind(),e.popup.open(),e._current&&e.scroll(e._current[0])},dataBind:function(e){for(var t,n=this,i=n.options,a=i.format,o=c.toString,s=n.template,l=e.length,u=0,d="";l>u;u++)t=e[u],r(t,i.min,i.max)&&(d+=s(o(t,a,i.culture)));n._html(d)},refresh:function(){var e,t,r,o=this,s=o.options,l=s.format,u=i(),d=0>u,p=s.min,f=s.max,h=a(p),m=a(f),g=s.interval*A,v=c.toString,_=o.template,w=new G(+p),b=w.getDate(),k=0,y="";for(r=d?(H+u*A)/g:H/g,h!=m&&(h>m&&(m+=H),r=(m-h)/g+1),t=parseInt(r,10);r>k;k++)k&&n(w,g,d),m&&t==k&&(e=a(w),b<w.getDate()&&(e+=H),e>m&&(w=new G(+f))),y+=_(v(w,l,s.culture));o._html(y)},bind:function(){var e=this,t=e.options.dates;t&&t[0]?e.dataBind(t):e.refresh()},_html:function(e){var t=this;t.ul[0].innerHTML=e,t.popup.unbind(w,t._heightHandler),t.popup.one(w,t._heightHandler),t.current(null),t.select(t._value)},scroll:function(e){if(e){var t,n=this.ul[0],i=e.offsetTop,a=e.offsetHeight,r=n.scrollTop,o=n.clientHeight,s=i+a,l=this._touchScroller;l?(t=this.list.height(),i>t&&(i=i-t+a),l.scrollTo(0,-i)):n.scrollTop=r>i?i:s>r+o?s-o:r}},select:function(t){var n=this,i=n.options,a=n._current;t instanceof Date&&(t=c.toString(t,i.format,i.culture)),"string"==typeof t&&(a&&a.text()===t?t=a:(t=e.grep(n.ul[0].childNodes,function(e){return(e.textContent||e.innerText)==t}),t=t[0]?t:null)),n.current(t)},setOptions:function(e){var t=this.options;e.min=p(e.min),e.max=p(e.max),this.options=q(t,e,{active:t.active,change:t.change,close:t.close,open:t.open}),this.bind()},toggle:function(){var e=this;e.popup.visible()?e.close():e.open()},value:function(e){var t=this;t._value=e,t.ul[0].firstChild&&t.select(e)},_click:function(t){var n=this,i=e(t.currentTarget),a=i.text(),r=n.options.dates;r&&r.length>0&&(a=r[i.index()]),t.isDefaultPrevented()||(n.select(i),n.options.change(a,!0),n.close())},_height:function(){var e=this,t=e.list,n=t.parent(".k-animation-container"),i=e.options.height;e.ul[0].children.length&&t.add(n).show().height(e.ul[0].scrollHeight>i?i:"auto").hide()},_parse:function(e){var t=this,n=t.options,i=t._value||Y;return e instanceof G?e:(e=p(e,n.parseFormats,n.culture),e&&(e=new G(i.getFullYear(),i.getMonth(),i.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())),e)},_adjustListWidth:function(){var e,t,n=this.list,i=n[0].style.width,a=this.options.anchor;(n.data("width")||!i)&&(e=window.getComputedStyle?window.getComputedStyle(a[0],null):0,t=e?parseFloat(e.width):a.outerWidth(),e&&(g.mozilla||g.msie)&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),i=t-(n.outerWidth()-n.width()),n.css({fontFamily:a.css("font-family"),width:i}).data("width",i))},_popup:function(){var e=this,t=e.list,n=e.options,i=n.anchor;e.popup=new v.Popup(t,q(n.popup,{anchor:i,open:n.open,close:n.close,animation:n.animation,isRtl:m.isRtl(n.anchor)})),e._touchScroller=c.touchScroller(e.popup.element)},move:function(e){var n=this,i=e.keyCode,a=n.ul[0],r=n._current,o=i===d.DOWN;if(i===d.UP||o){if(e.altKey)return n.toggle(o),t;r=o?r?r[0].nextSibling:a.firstChild:r?r[0].previousSibling:a.lastChild,r&&n.select(r),n.options.change(n._current.text()),e.preventDefault()}else(i===d.ENTER||i===d.TAB||i===d.ESC)&&(e.preventDefault(),r&&n.options.change(r.text(),!0),n.close())}},l.getMilliseconds=a,c.TimeView=l,u=_.extend({init:function(t,n){var i,a,r,s=this;_.fn.init.call(s,t,n),t=s.element,n=s.options,n.min=p(t.attr("min"))||p(n.min),n.max=p(t.attr("max"))||p(n.max),o(n),s._initialOptions=q({},n),s._wrapper(),s.timeView=a=new l(q({},n,{id:t.attr($),anchor:s.wrapper,format:n.format,change:function(e,n){n?s._change(e):t.val(e)},open:function(e){s.timeView._adjustListWidth(),s.trigger(w)?e.preventDefault():(t.attr(B,!0),i.attr(L,!1))},close:function(e){s.trigger(b)?e.preventDefault():(t.attr(B,!1),i.attr(L,!0))},active:function(e){t.removeAttr(W),e&&t.attr(W,a._optionID)}})),i=a.ul,s._icon(),s._reset();try{t[0].setAttribute("type","text")}catch(u){t[0].type="text"}t.addClass("k-input").attr({role:"combobox","aria-expanded":!1,"aria-owns":a._timeViewID}),r=t.is("[disabled]")||e(s.element).parents("fieldset").is(":disabled"),r?s.enable(!1):s.readonly(t.is("[readonly]")),s._old=s._update(n.value||s.element.val()),s._oldText=t.val(),c.notify(s)},options:{name:"TimePicker",min:Y,max:Y,format:"",dates:[],parseFormats:[],value:null,interval:30,height:200,animation:{}},events:[w,b,k],setOptions:function(e){var t=this,n=t._value;_.fn.setOptions.call(t,e),e=t.options,o(e),t.timeView.setOptions(e),n&&t.element.val(c.toString(n,e.format,e.culture))},dataBind:function(e){U(e)&&this.timeView.dataBind(e)},_editable:function(e){var t=this,n=e.disable,i=e.readonly,a=t._arrow.off(y),r=t.element.off(y),o=t._inputWrapper.off(y);i||n?(o.addClass(n?z:C).removeClass(n?C:z),r.attr(S,n).attr(T,i).attr(R,n).attr(N,i)):(o.addClass(C).removeClass(z).on(F,t._toggleHover),r.removeAttr(S).removeAttr(T).attr(R,!1).attr(N,!1).on("keydown"+y,j(t._keydown,t)).on("focusout"+y,j(t._blur,t)).on("focus"+y,function(){t._inputWrapper.addClass(I)}),a.on(x,j(t._click,t)).on(M,s))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;_.fn.destroy.call(e),e.timeView.destroy(),e.element.off(y),e._arrow.off(y),e._inputWrapper.off(y),e._form&&e._form.off("reset",e._resetHandler)},close:function(){this.timeView.close()},open:function(){this.timeView.open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_blur:function(){var e=this,t=e.element.val();e.close(),t!==e._oldText&&e._change(t),e._inputWrapper.removeClass(I)},_click:function(){var e=this,t=e.element;e.timeView.toggle(),m.touch||t[0]===f()||t.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t._typing||t.element.trigger(k),t.trigger(k)),t._typing=!1},_icon:function(){var t,n=this,i=n.element;t=i.next("span.k-select"),t[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(i)),n._arrow=t.attr({role:"button","aria-controls":n.timeView._timeViewID})},_keydown:function(e){var t=this,n=e.keyCode,i=t.timeView,a=t.element.val();i.popup.visible()||e.altKey?i.move(e):n===d.ENTER&&a!==t._oldText?t._change(a):t._typing=!0},_option:function(e,n){var i=this,a=i.options;return n===t?a[e]:(n=i.timeView._parse(n),n&&(n=new G(+n),a[e]=n,i.timeView.options[e]=n,i.timeView.bind()),t)},_toggleHover:function(t){e(t.currentTarget).toggleClass(P,"mouseenter"===t.type)},_update:function(e){var t=this,n=t.options,i=t.timeView,a=i._parse(e);return r(a,n.min,n.max)||(a=null),t._value=a,t.element.val(a?c.toString(a,n.format,n.culture):e),i.value(a),a},_wrapper:function(){var t,n=this,i=n.element;t=i.parents(".k-timepicker"),t[0]||(t=i.wrap(E).parent().addClass("k-picker-wrap k-state-default"),t=t.wrap(E).parent()),t[0].style.cssText=i[0].style.cssText,n.wrapper=t.addClass("k-widget k-timepicker k-header").addClass(i[0].className),i.css({width:"100%",height:i[0].style.height}),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),a=i?e("#"+i):n.closest("form");a[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue),t.max(t._initialOptions.max),t.min(t._initialOptions.min)},t._form=a.on("reset",t._resetHandler))}}),v.plugin(u)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});