/**
 * Copyright 2015 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

!function(e,define){define(["./kendo.core.min","./kendo.popup.min"],e)}(function(){return function(e,t){var n=window.kendo,i=n.ui.Widget,a=e.proxy,o=e.extend,r=window.setTimeout,s="click",l="show",u="hide",c="k-notification",d=".k-notification-wrap .k-i-close",h="info",f="success",p="warning",m="error",g="top",v="left",_="bottom",w="right",b="up",y=".kendoNotification",k='<div class="k-widget k-notification"></div>',x='<div class="k-notification-wrap"><span class="k-icon k-i-note">#=typeIcon#</span>#=content#<span class="k-icon k-i-close">Hide</span></div>',C=i.extend({init:function(t,a){var o=this;i.fn.init.call(o,t,a),a=o.options,a.appendTo&&e(a.appendTo).is(t)||o.element.hide(),o._compileTemplates(a.templates),o._guid="_"+n.guid(),o._isRtl=n.support.isRtl(t),o._compileStacking(a.stacking,a.position.top,a.position.left),n.notify(o)},events:[l,u],options:{name:"Notification",position:{pinned:!0,top:null,left:null,bottom:20,right:20},stacking:"default",hideOnClick:!0,button:!1,allowHideAfter:0,autoHideAfter:5e3,appendTo:null,width:null,height:null,templates:[],animation:{open:{effects:"fade:in",duration:300},close:{effects:"fade:out",duration:600,hide:!0}}},_compileTemplates:function(t){var i=this,a=n.template;i._compiled={},e.each(t,function(t,n){i._compiled[n.type]=a(n.template||e("#"+n.templateId).html())}),i._defaultCompiled=a(x)},_getCompiled:function(e){var t=this,n=t._defaultCompiled;return e?t._compiled[e]||n:n},_compileStacking:function(e,t,n){var i,a,o=this,r={paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0},s=null!==n?v:w;switch(e){case"down":i=_+" "+s,a=g+" "+s,delete r.paddingBottom;break;case w:i=g+" "+w,a=g+" "+v,delete r.paddingRight;break;case v:i=g+" "+v,a=g+" "+w,delete r.paddingLeft;break;case b:i=g+" "+s,a=_+" "+s,delete r.paddingTop;break;default:null!==t?(i=_+" "+s,a=g+" "+s,delete r.paddingBottom):(i=g+" "+s,a=_+" "+s,delete r.paddingTop)}o._popupOrigin=i,o._popupPosition=a,o._popupPaddings=r},_attachPopupEvents:function(e,t){function i(e){e.on(s+y,function(){o._hidePopup(t)})}var a,o=this,l=e.allowHideAfter,u=!isNaN(l)&&l>0;t.options.anchor!==document.body&&t.options.origin.indexOf(w)>0&&t.bind("open",function(){var e=n.getShadows(t.element);r(function(){t.wrapper.css("left",parseFloat(t.wrapper.css("left"))+e.left+e.right)})}),e.hideOnClick?t.bind("activate",function(){u?r(function(){i(t.element)},l):i(t.element)}):e.button&&(a=t.element.find(d),u?r(function(){i(a)},l):i(a))},_showPopup:function(t,i){var a,s,l=this,u=i.autoHideAfter,c=i.position.left,h=i.position.top;s=e("."+l._guid+":not(.k-hiding)").last(),a=new n.ui.Popup(t,{anchor:s[0]?s:document.body,origin:l._popupOrigin,position:l._popupPosition,animation:i.animation,modal:!0,collision:"",isRtl:l._isRtl,close:function(){l._triggerHide(this.element)},deactivate:function(e){e.sender.element.off(y),e.sender.element.find(d).off(y),e.sender.destroy()}}),l._attachPopupEvents(i,a),s[0]?a.open():(null===c&&(c=e(window).width()-t.width()-i.position.right),null===h&&(h=e(window).height()-t.height()-i.position.bottom),a.open(c,h)),a.wrapper.addClass(l._guid).css(o({margin:0},l._popupPaddings)),i.position.pinned?(a.wrapper.css("position","fixed"),s[0]&&l._togglePin(a.wrapper,!0)):s[0]||l._togglePin(a.wrapper,!1),u>0&&r(function(){l._hidePopup(a)},u)},_hidePopup:function(e){e.wrapper.addClass("k-hiding"),e.close()},_togglePin:function(t,n){var i=e(window),a=n?-1:1;t.css({top:parseInt(t.css(g),10)+a*i.scrollTop(),left:parseInt(t.css(v),10)+a*i.scrollLeft()})},_attachStaticEvents:function(e,t){function n(e){e.on(s+y,a(i._hideStatic,i,t))}var i=this,o=e.allowHideAfter,l=!isNaN(o)&&o>0;e.hideOnClick?l?r(function(){n(t)},o):n(t):e.button&&(l?r(function(){n(t.find(d))},o):n(t.find(d)))},_showStatic:function(e,t){var n=this,i=t.autoHideAfter,a=t.animation,o=t.stacking==b||t.stacking==v?"prependTo":"appendTo";e.addClass(n._guid)[o](t.appendTo).hide().kendoAnimate(a.open||!1),n._attachStaticEvents(t,e),i>0&&r(function(){n._hideStatic(e)},i)},_hideStatic:function(e){e.kendoAnimate(o(this.options.animation.close||!1,{complete:function(){e.off(y).find(d).off(y),e.remove()}})),this._triggerHide(e)},_triggerHide:function(e){this.trigger(u,{element:e}),this.angular("cleanup",function(){return{elements:e}})},show:function(i,a){var r,s,u=this,d=u.options,f=e(k);return a||(a=h),null!==i&&i!==t&&""!==i&&(n.isFunction(i)&&(i=i()),s={typeIcon:a,content:""},r=e.isPlainObject(i)?o(s,i):o(s,{content:i}),f.addClass(c+"-"+a).toggleClass(c+"-button",d.button).attr("data-role","alert").css({width:d.width,height:d.height}).append(u._getCompiled(a)(r)),u.angular("compile",function(){return{elements:f,data:[{dataItem:r}]}}),e(d.appendTo)[0]?u._showStatic(f,d):u._showPopup(f,d),u.trigger(l,{element:f})),u},info:function(e){return this.show(e,h)},success:function(e){return this.show(e,f)},warning:function(e){return this.show(e,p)},error:function(e){return this.show(e,m)},hide:function(){var t=this,n=t.getNotifications();return n.each(t.options.appendTo?function(n,i){t._hideStatic(e(i))}:function(n,i){var a=e(i).data("kendoPopup");a&&t._hidePopup(a)}),t},getNotifications:function(){var t=this,n=e("."+t._guid);return t.options.appendTo?n:n.children("."+c)},setOptions:function(e){var n,a=this;i.fn.setOptions.call(a,e),n=a.options,e.templates!==t&&a._compileTemplates(n.templates),(e.stacking!==t||e.position!==t)&&a._compileStacking(n.stacking,n.position.top,n.position.left)},destroy:function(){i.fn.destroy.call(this),this.getNotifications().off(y).find(d).off(y)}});n.ui.plugin(C)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});