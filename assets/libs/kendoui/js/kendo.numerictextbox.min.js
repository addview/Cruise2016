/**
 * Copyright 2015 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

!function(e,define){define(["./kendo.core.min","./kendo.userevents.min"],e)}(function(){return function(e,t){function n(e,t){return'<span unselectable="on" class="k-link"><span unselectable="on" class="k-icon k-i-arrow-'+e+'" title="'+t+'">'+t+"</span></span>"}var i=window.kendo,a=i.caret,o=i.keys,r=i.ui,s=r.Widget,l=i._activeElement,u=i._extractFormat,c=i.parseFloat,d=i.support.placeholder,h=i.getCulture,p=i._round,f="change",m="disabled",g="readonly",v="k-input",_="spin",w=".kendoNumericTextBox",b="touchend",y="mouseleave"+w,k="mouseenter"+w+" "+y,x="k-state-default",C="k-state-focused",T="k-state-hover",S="focus",D=".",I="k-state-selected",F="k-state-disabled",E="aria-disabled",M="aria-readonly",O=/^(-)?(\d*)$/,V=null,P=e.proxy,A=e.extend,H=s.extend({init:function(n,a){var o,r,l,c,d,h=this,p=a&&a.step!==t;s.fn.init.call(h,n,a),a=h.options,n=h.element.on("focusout"+w,P(h._focusout,h)).attr("role","spinbutton"),a.placeholder=a.placeholder||n.attr("placeholder"),h._initialOptions=A({},a),h._reset(),h._wrapper(),h._arrows(),h._input(),i.support.mobileOS?h._text.on(b+w+" "+S+w,function(){h._toggleText(!1),n.focus()}):h._text.on(S+w,P(h._click,h)),o=h.min(n.attr("min")),r=h.max(n.attr("max")),l=h._parse(n.attr("step")),a.min===V&&o!==V&&(a.min=o),a.max===V&&r!==V&&(a.max=r),p||l===V||(a.step=l),n.attr("aria-valuemin",a.min).attr("aria-valuemax",a.max),a.format=u(a.format),c=a.value,h.value(c!==V?c:n.val()),d=n.is("[disabled]")||e(h.element).parents("fieldset").is(":disabled"),d?h.enable(!1):h.readonly(n.is("[readonly]")),i.notify(h)},options:{name:"NumericTextBox",decimals:V,min:V,max:V,value:V,step:1,culture:"",format:"n",spinners:!0,placeholder:"",upArrowText:"Increase value",downArrowText:"Decrease value"},events:[f,_],_editable:function(e){var t=this,n=t.element,i=e.disable,a=e.readonly,o=t._text.add(n),r=t._inputWrapper.off(k);t._toggleText(!0),t._upArrowEventHandler.unbind("press"),t._downArrowEventHandler.unbind("press"),n.off("keydown"+w).off("keypress"+w).off("paste"+w),a||i?(r.addClass(i?F:x).removeClass(i?x:F),o.attr(m,i).attr(g,a).attr(E,i).attr(M,a)):(r.addClass(x).removeClass(F).on(k,t._toggleHover),o.removeAttr(m).removeAttr(g).attr(E,!1).attr(M,!1),t._upArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(1),t._upArrow.addClass(I)}),t._downArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(-1),t._downArrow.addClass(I)}),t.element.on("keydown"+w,P(t._keydown,t)).on("keypress"+w,P(t._keypress,t)).on("paste"+w,P(t._paste,t)))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;e.element.add(e._text).add(e._upArrow).add(e._downArrow).add(e._inputWrapper).off(w),e._upArrowEventHandler.destroy(),e._downArrowEventHandler.destroy(),e._form&&e._form.off("reset",e._resetHandler),s.fn.destroy.call(e)},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},step:function(e){return this._option("step",e)},value:function(e){var n,i=this;return e===t?i._value:(e=i._parse(e),n=i._adjust(e),e===n&&(i._update(e),i._old=i._value),t)},focus:function(){this._focusin()},_adjust:function(e){var t=this,n=t.options,i=n.min,a=n.max;return e===V?e:(i!==V&&i>e?e=i:a!==V&&e>a&&(e=a),e)},_arrows:function(){var t,a=this,o=function(){clearTimeout(a._spinning),t.removeClass(I)},r=a.options,s=r.spinners,l=a.element;t=l.siblings(".k-icon"),t[0]||(t=e(n("n",r.upArrowText)+n("s",r.downArrowText)).insertAfter(l),t.wrapAll('<span class="k-select"/>')),s||(t.parent().toggle(s),a._inputWrapper.addClass("k-expand-padding")),a._upArrow=t.eq(0),a._upArrowEventHandler=new i.UserEvents(a._upArrow,{release:o}),a._downArrow=t.eq(1),a._downArrowEventHandler=new i.UserEvents(a._downArrow,{release:o})},_blur:function(){var e=this;e._toggleText(!0),e._change(e.element.val())},_click:function(e){var t=this;clearTimeout(t._focusing),t._focusing=setTimeout(function(){var n,i,o,r=e.target,s=a(r)[0],l=r.value.substring(0,s),u=t._format(t.options.format),c=u[","],d=0;c&&(i=RegExp("\\"+c,"g"),o=RegExp("([\\d\\"+c+"]+)(\\"+u[D]+")?(\\d+)?")),o&&(n=o.exec(l)),n&&(d=n[0].replace(i,"").length,-1!=l.indexOf("(")&&0>t._value&&d++),t._focusin(),a(t.element[0],d)})},_change:function(e){var t=this;t._update(e),e=t._value,t._old!=e&&(t._old=e,t._typing||t.element.trigger(f),t.trigger(f)),t._typing=!1},_culture:function(e){return e||h(this.options.culture)},_focusin:function(){var e=this;e._inputWrapper.addClass(C),e._toggleText(!1),e.element[0].focus()},_focusout:function(){var e=this;clearTimeout(e._focusing),e._inputWrapper.removeClass(C).removeClass(T),e._blur()},_format:function(e,t){var n=this._culture(t).numberFormat;return e=e.toLowerCase(),e.indexOf("c")>-1?n=n.currency:e.indexOf("p")>-1&&(n=n.percent),n},_input:function(){var t,n=this,i="k-formatted-value",a=n.element.addClass(v).show()[0],o=a.accessKey,r=n.wrapper;t=r.find(D+i),t[0]||(t=e('<input type="text"/>').insertBefore(a).addClass(i));try{a.setAttribute("type","text")}catch(s){a.type="text"}t[0].tabIndex=a.tabIndex,t[0].style.cssText=a.style.cssText,t[0].title=a.title,t.prop("placeholder",n.options.placeholder),o&&(t.attr("accesskey",o),a.accessKey=""),n._text=t.addClass(a.className)},_keydown:function(e){var t=this,n=e.keyCode;t._key=n,n==o.DOWN?t._step(-1):n==o.UP?t._step(1):n==o.ENTER?t._change(t.element.val()):t._typing=!0},_keypress:function(e){var t,n,i,r,s,l,u,c,d,h,p;0===e.which||e.metaKey||e.ctrlKey||e.keyCode===o.BACKSPACE||e.keyCode===o.ENTER||(t=this,n=t.options.min,i=t.element,r=a(i),s=r[0],l=r[1],u=String.fromCharCode(e.which),c=t._format(t.options.format),d=t._key===o.NUMPAD_DOT,h=i.val(),d&&(u=c[D]),h=h.substring(0,s)+u+h.substring(l),p=t._numericRegex(c).test(h),p&&d?(i.val(h),a(i,s+u.length),e.preventDefault()):(null!==n&&n>=0&&"-"===h.charAt(0)||!p)&&e.preventDefault(),t._key=0)},_numericRegex:function(e){var t=this,n=e[D],i=t.options.decimals;return n===D&&(n="\\"+n),i===V&&(i=e.decimals),0===i?O:(t._separator!==n&&(t._separator=n,t._floatRegExp=RegExp("^(-)?(((\\d+("+n+"\\d*)?)|("+n+"\\d*)))?$")),t._floatRegExp)},_paste:function(e){var t=this,n=e.target,i=n.value;setTimeout(function(){t._parse(n.value)===V&&t._update(i)})},_option:function(e,n){var i=this,a=i.options;return n===t?a[e]:(n=i._parse(n),(n||"step"!==e)&&(a[e]=n,i.element.attr("aria-value"+e,n).attr(e,n)),t)},_spin:function(e,t){var n=this;t=t||500,clearTimeout(n._spinning),n._spinning=setTimeout(function(){n._spin(e,50)},t),n._step(e)},_step:function(e){var t=this,n=t.element,i=t._parse(n.val())||0;l()!=n[0]&&t._focusin(),i+=t.options.step*e,t._update(t._adjust(i)),t._typing=!1,t.trigger(_)},_toggleHover:function(t){e(t.currentTarget).toggleClass(T,"mouseenter"===t.type)},_toggleText:function(e){var t=this;t._text.toggle(e),t.element.toggle(!e)},_parse:function(e,t){return c(e,this._culture(t),this.options.format)},_update:function(e){var t,n=this,a=n.options,o=a.format,r=a.decimals,s=n._culture(),l=n._format(o,s);r===V&&(r=l.decimals),e=n._parse(e,s),t=e!==V,t&&(e=parseFloat(p(e,r))),n._value=e=n._adjust(e),n._placeholder(i.toString(e,o,s)),t?(e=""+e,-1!==e.indexOf("e")&&(e=p(+e,r)),e=e.replace(D,l[D])):e="",n.element.val(e).attr("aria-valuenow",e)},_placeholder:function(e){this._text.val(e),d||e||this._text.val(this.options.placeholder)},_wrapper:function(){var t,n=this,i=n.element,a=i[0];t=i.parents(".k-numerictextbox"),t.is("span.k-numerictextbox")||(t=i.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent(),t=t.wrap("<span/>").parent()),t[0].style.cssText=a.style.cssText,a.style.width="",n.wrapper=t.addClass("k-widget k-numerictextbox").addClass(a.className).css("display",""),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),a=i?e("#"+i):n.closest("form");a[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(n[0].value),t.max(t._initialOptions.max),t.min(t._initialOptions.min)})},t._form=a.on("reset",t._resetHandler))}});r.plugin(H)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});