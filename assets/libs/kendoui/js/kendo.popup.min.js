/**
 * Copyright 2015 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

!function(e,define){define(["./kendo.core.min"],e)}(function(){return function(e){function t(t,n){return t===n||e.contains(t,n)}var n=window.kendo,i=n.ui,a=i.Widget,r=n.support,o=n.getOffset,s="open",l="close",u="deactivate",c="activate",d="center",p="left",h="right",f="top",m="bottom",g="absolute",v="hidden",_="body",w="location",b="position",y="visible",k="effects",x="k-state-active",C="k-state-border",T=/k-state-border-(\w+)/,S=".k-picker-wrap, .k-dropdown-wrap, .k-link",D="down",I=e(document.documentElement),E=e(window),F="scroll",M="resize scroll",P=r.transitions.css,O=P+"transform",V=e.extend,A=".kendoPopup",H=["font-size","font-family","font-stretch","font-style","font-weight","line-height"],z=a.extend({init:function(t,i){var r,o=this;i=i||{},i.isRtl&&(i.origin=i.origin||m+" "+h,i.position=i.position||f+" "+h),a.fn.init.call(o,t,i),t=o.element,i=o.options,o.collisions=i.collision?i.collision.split(" "):[],o.downEvent=n.applyEventMap(D,n.guid()),1===o.collisions.length&&o.collisions.push(o.collisions[0]),r=e(o.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),i.appendTo=e(e(i.appendTo)[0]||r[0]||_),o.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!i.isRtl).css({position:g}).appendTo(i.appendTo).on("mouseenter"+A,function(){o._hovered=!0}).on("mouseleave"+A,function(){o._hovered=!1}),o.wrapper=e(),i.animation===!1&&(i.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),V(i.animation.open,{complete:function(){o.wrapper.css({overflow:y}),o._activated=!0,o._trigger(c)}}),V(i.animation.close,{complete:function(){o._animationClose()}}),o._mousedownProxy=function(e){o._mousedown(e)},o._resizeProxy=function(e){o._resize(e)},i.toggleTarget&&e(i.toggleTarget).on(i.toggleEvent+A,e.proxy(o.toggle,o))},events:[s,c,l,u],options:{name:"Popup",toggleEvent:"click",origin:m+" "+p,position:f+" "+p,anchor:_,appendTo:null,collision:"flip fit",viewport:window,copyAnchorStyles:!0,autosize:!1,modal:!1,adjustSize:{width:0,height:0},animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},_animationClose:function(){var t,i,a,r,o=this,s=o.options;o.wrapper.hide(),t=o.wrapper.data(w),i=e(s.anchor),t&&o.wrapper.css(t),s.anchor!=_&&(a=((i.attr("class")||"").match(T)||["","down"])[1],r=C+"-"+a,i.removeClass(r).children(S).removeClass(x).removeClass(r),o.element.removeClass(C+"-"+n.directions[a].reverse)),o._closing=!1,o._trigger(u)},destroy:function(){var t,i=this,r=i.options,o=i.element.off(A);a.fn.destroy.call(i),r.toggleTarget&&e(r.toggleTarget).off(A),r.modal||(I.unbind(i.downEvent,i._mousedownProxy),i._scrollableParents().unbind(F,i._resizeProxy),E.unbind(M,i._resizeProxy)),n.destroy(i.element.children()),o.removeData(),r.appendTo[0]===document.body&&(t=o.parent(".k-animation-container"),t[0]?t.remove():o.remove())},open:function(t,i){var a,o,l,u=this,c={isFixed:!isNaN(parseInt(i,10)),x:t,y:i},d=u.element,p=u.options,h="down",m=e(p.anchor),w=d[0]&&d.hasClass("km-widget");if(!u.visible()){if(p.copyAnchorStyles&&(w&&"font-size"==H[0]&&H.shift(),d.css(n.getComputedStyles(m[0],H))),d.data("animating")||u._trigger(s))return;u._activated=!1,p.modal||(I.unbind(u.downEvent,u._mousedownProxy).bind(u.downEvent,u._mousedownProxy),r.mobileOS.ios||r.mobileOS.android||(u._scrollableParents().unbind(F,u._resizeProxy).bind(F,u._resizeProxy),E.unbind(M,u._resizeProxy).bind(M,u._resizeProxy))),u.wrapper=o=n.wrap(d,p.autosize).css({overflow:v,display:"block",position:g}),r.mobileOS.android&&o.css(O,"translatez(0)"),o.css(b),e(p.appendTo)[0]==document.body&&o.css(f,"-10000px"),a=V(!0,{},p.animation.open),u.flipped=u._position(c),a.effects=n.parseEffects(a.effects,u.flipped),h=a.effects.slideIn?a.effects.slideIn.direction:h,p.anchor!=_&&(l=C+"-"+h,d.addClass(C+"-"+n.directions[h].reverse),m.addClass(l).children(S).addClass(x).addClass(l)),d.data(k,a.effects).kendoStop(!0).kendoAnimate(a)}},position:function(){this.visible()&&this._position()},toggle:function(){var e=this;e[e.visible()?l:s]()},visible:function(){return this.element.is(":"+y)},close:function(t){var i,a,r,o,s=this,u=s.options;if(s.visible()){if(i=s.wrapper[0]?s.wrapper:n.wrap(s.element).hide(),s._closing||s._trigger(l))return;s.element.find(".k-popup").each(function(){var n=e(this),i=n.data("kendoPopup");i&&i.close(t)}),I.unbind(s.downEvent,s._mousedownProxy),s._scrollableParents().unbind(F,s._resizeProxy),E.unbind(M,s._resizeProxy),t?a={hide:!0,effects:{}}:(a=V(!0,{},u.animation.close),r=s.element.data(k),o=a.effects,!o&&!n.size(o)&&r&&n.size(r)&&(a.effects=r,a.reverse=!0),s._closing=!0),s.element.kendoStop(!0),i.css({overflow:v}),s.element.kendoAnimate(a)}},_trigger:function(e){return this.trigger(e,{type:e})},_resize:function(e){var t=this;"resize"===e.type?(clearTimeout(t._resizeTimeout),t._resizeTimeout=setTimeout(function(){t._position(),t._resizeTimeout=null},50)):(!t._hovered||t._activated&&t.element.hasClass("k-list-container"))&&t.close()},_mousedown:function(i){var a=this,r=a.element[0],o=a.options,s=e(o.anchor)[0],l=o.toggleTarget,u=n.eventTarget(i),c=e(u).closest(".k-popup"),d=c.parent().parent(".km-shim").length;c=c[0],(d||!c||c===a.element[0])&&"popover"!==e(i.target).closest("a").data("rel")&&(t(r,u)||t(s,u)||l&&t(e(l)[0],u)||a.close())},_fit:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i},_flip:function(e,t,n,i,a,r,o){var s=0;return o=o||t,r!==a&&r!==d&&a!==d&&(e+o>i&&(s+=-(n+t)),0>e+s&&(s+=n+t)),s},_scrollableParents:function(){return e(this.options.anchor).parentsUntil("body").filter(function(e,t){return n.isScrollable(t)})},_position:function(t){var i,a,s,l,u,c,d,p,h,f,m,v=this,_=v.element,y=v.wrapper,k=v.options,x=e(k.viewport),C=x.offset(),T=e(k.anchor),S=k.origin.toLowerCase().split(" "),D=k.position.toLowerCase().split(" "),I=v.collisions,E=r.zoomLevel(),F=10002,M=!!(x[0]==window&&window.innerWidth&&1.02>=E),P=0,O=document.documentElement,A=M?window.innerWidth:x.width(),H=M?window.innerHeight:x.height();if(M&&O.scrollHeight-O.clientHeight>0&&(A-=n.support.scrollbar()),i=T.parents().filter(y.siblings()),i[0])if(s=Math.max(+i.css("zIndex"),0))F=s+10;else for(a=T.parentsUntil(i),l=a.length;l>P;P++)s=+e(a[P]).css("zIndex"),s&&s>F&&(F=s+10);return y.css("zIndex",F),y.css(t&&t.isFixed?{left:t.x,top:t.y}:v._align(S,D)),u=o(y,b,T[0]===y.offsetParent()[0]),c=o(y),d=T.offsetParent().parent(".k-animation-container,.k-popup,.k-group"),d.length&&(u=o(y,b,!0),c=o(y)),x[0]===window?(c.top-=window.pageYOffset||document.documentElement.scrollTop||0,c.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(c.top-=C.top,c.left-=C.left),v.wrapper.data(w)||y.data(w,V({},u)),p=V({},c),h=V({},u),f=k.adjustSize,"fit"===I[0]&&(h.top+=v._fit(p.top,y.outerHeight()+f.height,H/E)),"fit"===I[1]&&(h.left+=v._fit(p.left,y.outerWidth()+f.width,A/E)),m=V({},h),"flip"===I[0]&&(h.top+=v._flip(p.top,_.outerHeight(),T.outerHeight(),H/E,S[0],D[0],y.outerHeight())),"flip"===I[1]&&(h.left+=v._flip(p.left,_.outerWidth(),T.outerWidth(),A/E,S[1],D[1],y.outerWidth())),_.css(b,g),y.css(h),h.left!=m.left||h.top!=m.top},_align:function(t,n){var i,a=this,r=a.wrapper,s=e(a.options.anchor),l=t[0],u=t[1],c=n[0],p=n[1],f=o(s),g=e(a.options.appendTo),v=r.outerWidth(),_=r.outerHeight(),w=s.outerWidth(),b=s.outerHeight(),y=f.top,k=f.left,x=Math.round;return g[0]!=document.body&&(i=o(g),y-=i.top,k-=i.left),l===m&&(y+=b),l===d&&(y+=x(b/2)),c===m&&(y-=_),c===d&&(y-=x(_/2)),u===h&&(k+=w),u===d&&(k+=x(w/2)),p===h&&(k-=v),p===d&&(k-=x(v/2)),{top:y,left:k}}});i.plugin(z)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});